{
  "version": 3,
  "sources": ["../widget/src/index.ts"],
  "sourcesContent": ["export {};\n\n/**\n * StartOS Docs Support Agent Widget\n * Vanilla TypeScript - no framework dependencies\n */\n\n// Types\ntype Config = {\n  apiBaseUrl: string;\n  position?: \"bottom-right\" | \"bottom-left\";\n};\n\ntype Session = {\n  token: string;\n  sessionId: string;\n};\n\ntype Chat = {\n  chat_id: string;\n  created_at: string;\n  messages?: Array<{ role: string; content: string }>;\n};\n\ntype Message = {\n  id?: string;\n  role: \"user\" | \"assistant\";\n  content: string;\n};\n\n// API Client\nclass DocsAgentAPI {\n  constructor(private baseUrl: string) {}\n\n  private getHeaders(token?: string): Record<string, string> {\n    const headers: Record<string, string> = {\n      \"Content-Type\": \"application/json\",\n    };\n    if (token) {\n      headers[\"Authorization\"] = `Bearer ${token}`;\n    }\n    return headers;\n  }\n\n  async exchangeCode(code: string): Promise<Session> {\n    const res = await fetch(`${this.baseUrl}/auth/exchange`, {\n      method: \"POST\",\n      headers: this.getHeaders(),\n      body: JSON.stringify({ code }),\n    });\n    if (!res.ok) {\n      const err = await res.json().catch(() => ({ error: \"Exchange failed\" }));\n      throw new Error(err.error || \"Exchange failed\");\n    }\n    const data = await res.json();\n    return { token: data.session_token, sessionId: data.session_id };\n  }\n\n  async createChat(token: string): Promise<Chat> {\n    const res = await fetch(`${this.baseUrl}/chats`, {\n      method: \"POST\",\n      headers: this.getHeaders(token),\n    });\n    if (!res.ok) {\n      if (res.status === 401) throw new Error(\"Unauthorized\");\n      const err = await res\n        .json()\n        .catch(() => ({ error: \"Failed to create chat\" }));\n      throw new Error(err.error || \"Failed to create chat\");\n    }\n    return res.json();\n  }\n\n  async getChat(token: string, chatId: string): Promise<Chat> {\n    const res = await fetch(`${this.baseUrl}/chats/${chatId}`, {\n      headers: this.getHeaders(token),\n    });\n    if (!res.ok) {\n      if (res.status === 401) throw new Error(\"Unauthorized\");\n      throw new Error(\"Failed to fetch chat\");\n    }\n    return res.json();\n  }\n\n  async sendMessage(\n    token: string,\n    chatId: string,\n    content: string,\n    onText: (text: string) => void,\n    onDone: () => void,\n    onError: (err: string) => void,\n  ): Promise<void> {\n    const res = await fetch(`${this.baseUrl}/chats/${chatId}/messages`, {\n      method: \"POST\",\n      headers: this.getHeaders(token),\n      body: JSON.stringify({ content }),\n    });\n\n    if (!res.ok) {\n      if (res.status === 401) {\n        onError(\"Unauthorized\");\n        return;\n      }\n      const err = await res\n        .json()\n        .catch(() => ({ error: \"Failed to send message\" }));\n      onError(err.error || \"Failed to send message\");\n      return;\n    }\n\n    const reader = res.body?.getReader();\n    if (!reader) {\n      onError(\"Streaming not supported\");\n      return;\n    }\n\n    const decoder = new TextDecoder();\n    let buffer = \"\";\n\n    while (true) {\n      const { done, value } = await reader.read();\n      if (done) break;\n\n      buffer += decoder.decode(value, { stream: true });\n      const lines = buffer.split(\"\\n\");\n      buffer = lines.pop() || \"\";\n\n      for (const line of lines) {\n        if (line.startsWith(\"event: \")) {\n          const event = line.slice(7);\n          if (event === \"done\") {\n            onDone();\n            return;\n          } else if (event === \"error\") {\n            onError(\"Stream error\");\n            return;\n          }\n        } else if (line.startsWith(\"data: \")) {\n          try {\n            const data = JSON.parse(line.slice(6));\n            if (data.text) {\n              onText(data.text);\n            } else if (data.error) {\n              onError(data.error);\n              return;\n            }\n          } catch {}\n        }\n      }\n    }\n    onDone();\n  }\n}\n\n// Widget\nclass DocsAgentWidget {\n  private api: DocsAgentAPI;\n  private container: HTMLElement | null = null;\n  private isOpen = false;\n  private isLoading = false;\n  private isStreaming = false;\n  private messages: Message[] = [];\n  private session: Session | null = null;\n  private chatId: string | null = null;\n  private needsAccessCode = false;\n  private position: \"bottom-right\" | \"bottom-left\";\n  private storageKey = \"docs-agent-session\";\n  private inputEl!: HTMLTextAreaElement;\n\n  constructor(private config: Config) {\n    this.api = new DocsAgentAPI(config.apiBaseUrl);\n    this.position = config.position || \"bottom-right\";\n    this.loadSession();\n    this.init();\n  }\n\n  private loadSession(): void {\n    try {\n      const stored = localStorage.getItem(this.storageKey);\n      if (stored) {\n        const data = JSON.parse(stored);\n        this.session = data.session;\n        this.chatId = data.chatId;\n        this.messages = data.messages || [];\n      }\n    } catch {}\n\n    if (!this.session) {\n      this.needsAccessCode = true;\n    } else if (this.chatId && this.messages.length === 0) {\n      // Have a chat but no messages (maybe localStorage was partial) - fetch from server\n      this.fetchChatHistory();\n    }\n  }\n\n  private saveSession(): void {\n    if (this.session) {\n      localStorage.setItem(\n        this.storageKey,\n        JSON.stringify({\n          session: this.session,\n          chatId: this.chatId,\n          messages: this.messages,\n        }),\n      );\n    }\n  }\n\n  private async fetchChatHistory(): Promise<void> {\n    if (!this.session || !this.chatId) return;\n\n    try {\n      const chat = await this.api.getChat(this.session.token, this.chatId);\n      if (chat.messages) {\n        this.messages = chat.messages.map((m) => ({\n          role: m.role as \"user\" | \"assistant\",\n          content: m.content,\n        }));\n        this.saveSession();\n        this.render();\n      }\n    } catch (err: any) {\n      if (err.message === \"Unauthorized\") {\n        this.logout();\n        return;\n      }\n      // If fetch fails, just start fresh\n      this.chatId = null;\n      this.messages = [];\n      this.saveSession();\n    }\n  }\n\n  private logout(): void {\n    this.session = null;\n    this.chatId = null;\n    this.messages = [];\n    this.needsAccessCode = true;\n    localStorage.removeItem(this.storageKey);\n    this.render();\n  }\n\n  private init(): void {\n    this.container = document.createElement(\"div\");\n    this.container.id = \"docs-agent-widget\";\n    this.container.className = `da-widget da-${this.position}`;\n    document.body.appendChild(this.container);\n    this.render();\n  }\n\n  private render(): void {\n    if (!this.container) return;\n    this.container.innerHTML = this.isOpen\n      ? this.renderOpen()\n      : this.renderClosed();\n    this.bindEvents();\n  }\n\n  private renderClosed(): string {\n    return `\n      <button class=\"da-fab\" aria-label=\"Open support chat\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\"></path>\n        </svg>\n      </button>\n    `;\n  }\n\n  private renderOpen(): string {\n    return `\n      <div class=\"da-panel\">\n        <div class=\"da-header\">\n          <span class=\"da-title\">StartOS Support</span>\n          <div class=\"da-header-actions\">\n            ${\n              this.session\n                ? `\n              <button class=\"da-logout-btn\" title=\"Log out\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                  <path d=\"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\"></path>\n                  <polyline points=\"16 17 21 12 16 7\"></polyline>\n                  <line x1=\"21\" y1=\"12\" x2=\"9\" y2=\"12\"></line>\n                </svg>\n              </button>\n            `\n                : \"\"\n            }\n            <button class=\"da-close-btn\" aria-label=\"Minimize\" title=\"Minimize\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <polyline points=\"4 14 10 14 10 20\"></polyline>\n                <polyline points=\"20 10 14 10 14 4\"></polyline>\n                <line x1=\"14\" y1=\"10\" x2=\"21\" y2=\"3\"></line>\n                <line x1=\"3\" y1=\"21\" x2=\"10\" y2=\"14\"></line>\n              </svg>\n            </button>\n          </div>\n        </div>\n        <div class=\"da-body\">\n          ${this.needsAccessCode ? this.renderAccessCodeForm() : this.renderChat()}\n        </div>\n      </div>\n    `;\n  }\n\n  private renderAccessCodeForm(): string {\n    return `\n      <div class=\"da-access-code-form\">\n        <div class=\"da-access-code-info\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n            <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n            <line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"12\"></line>\n            <line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\"></line>\n          </svg>\n          <h3>Enter Access Code</h3>\n          <p>Please enter your access code to start chatting with StartOS support.</p>\n        </div>\n        <form class=\"da-code-form\">\n          <input \n            type=\"text\" \n            class=\"da-code-input\" \n            placeholder=\"Access code\"\n            autocomplete=\"off\"\n            autocapitalize=\"off\"\n          />\n          <button type=\"submit\" class=\"da-code-submit\">\n            Continue\n          </button>\n        </form>\n      </div>\n    `;\n  }\n\n  private renderChat(): string {\n    const messagesHtml =\n      this.messages.length === 0\n        ? `<div class=\"da-welcome\">\n        <p>Ask anything about StartOS</p>\n      </div>`\n        : this.messages.map((m) => this.renderMessage(m)).join(\"\");\n\n    return `\n      <div class=\"da-messages\">${messagesHtml}</div>\n      <div class=\"da-input-area\">\n        <div class=\"da-input-row\">\n          <textarea \n            class=\"da-input\" \n            placeholder=\"Ask a question...\" \n            rows=\"1\"\n            ${this.isLoading || this.isStreaming ? \"disabled\" : \"\"}\n          ></textarea>\n          <button class=\"da-send-btn\" ${this.isLoading || this.isStreaming ? \"disabled\" : \"\"}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n              <line x1=\"22\" y1=\"2\" x2=\"11\" y2=\"13\"></line>\n              <polygon points=\"22 2 15 22 11 13 2 9 22 2\"></polygon>\n            </svg>\n          </button>\n        </div>\n        <div class=\"da-input-footer\">\n          ${this.messages.length > 0 ? `<button class=\"da-end-chat-btn\">End chat</button>` : \"\"}\n        </div>\n      </div>\n    `;\n  }\n\n  private renderMessage(message: Message): string {\n    const isUser = message.role === \"user\";\n    const contentHtml = isUser\n      ? this.escapeHtml(message.content)\n      : this.renderMarkdown(message.content);\n    const cursorHtml =\n      this.isStreaming &&\n      !isUser &&\n      message === this.messages[this.messages.length - 1]\n        ? '<span class=\"da-cursor\"></span>'\n        : \"\";\n    return `\n      <div class=\"da-message da-message-${message.role}\">\n        <div class=\"da-message-content\">${contentHtml}${cursorHtml}</div>\n      </div>\n    `;\n  }\n\n  private escapeHtml(text: string): string {\n    const div = document.createElement(\"div\");\n    div.textContent = text;\n    return div.innerHTML;\n  }\n\n  private renderMarkdown(text: string): string {\n    // Simple markdown: code blocks, inline code, links, bold, italic\n    let html = this.escapeHtml(text);\n\n    // Code blocks\n    html = html.replace(\n      /```(\\w*)\\n([\\s\\S]*?)```/g,\n      \"<pre><code>$2</code></pre>\",\n    );\n\n    // Inline code\n    html = html.replace(/`([^`]+)`/g, \"<code>$1</code>\");\n\n    // Links\n    html = html.replace(\n      /\\[([^\\]]+)\\]\\(([^)]+)\\)/g,\n      '<a href=\"$2\" target=\"_blank\" rel=\"noopener\">$1</a>',\n    );\n\n    // Bold\n    html = html.replace(/\\*\\*([^*]+)\\*\\*/g, \"<strong>$1</strong>\");\n\n    // Italic\n    html = html.replace(/\\*([^*]+)\\*/g, \"<em>$1</em>\");\n\n    // Line breaks\n    html = html.replace(/\\n/g, \"<br>\");\n\n    return html;\n  }\n\n  private bindEvents(): void {\n    if (!this.container) return;\n\n    const fab = this.container.querySelector(\".da-fab\");\n    fab?.addEventListener(\"click\", () => this.toggle());\n\n    const closeBtn = this.container.querySelector(\".da-close-btn\");\n    closeBtn?.addEventListener(\"click\", () => this.toggle());\n\n    const logoutBtn = this.container.querySelector(\".da-logout-btn\");\n    logoutBtn?.addEventListener(\"click\", () => this.logout());\n\n    // Access code form\n    const codeForm = this.container.querySelector(\".da-code-form\");\n    codeForm?.addEventListener(\"submit\", (e) => {\n      e.preventDefault();\n      this.handleAccessCodeSubmit();\n    });\n\n    const codeInput = this.container.querySelector(\n      \".da-code-input\",\n    ) as HTMLInputElement;\n    codeInput?.addEventListener(\"keydown\", (e) => {\n      e.stopPropagation();\n    });\n\n    // Chat input\n    this.inputEl = this.container.querySelector(\n      \".da-input\",\n    ) as HTMLTextAreaElement;\n    if (this.inputEl) {\n      this.inputEl.addEventListener(\"keydown\", (e) => {\n        e.stopPropagation();\n        if (e.key === \"Enter\" && !e.shiftKey) {\n          e.preventDefault();\n          this.handleSend();\n        }\n      });\n      this.inputEl.addEventListener(\"input\", () => this.autoResizeInput());\n    }\n\n    const sendBtn = this.container.querySelector(\".da-send-btn\");\n    sendBtn?.addEventListener(\"click\", () => this.handleSend());\n\n    const endChatBtn = this.container.querySelector(\".da-end-chat-btn\");\n    endChatBtn?.addEventListener(\"click\", () => this.endChat());\n\n    // Scroll to bottom only if near bottom\n    const messagesEl = this.container.querySelector(\".da-messages\");\n    if (messagesEl) {\n      const isNearBottom =\n        messagesEl.scrollHeight -\n          messagesEl.scrollTop -\n          messagesEl.clientHeight <\n        100;\n      if (isNearBottom) {\n        messagesEl.scrollTop = messagesEl.scrollHeight;\n      }\n    }\n  }\n\n  private toggle(): void {\n    this.isOpen = !this.isOpen;\n    this.render();\n    if (this.isOpen && this.inputEl) {\n      this.inputEl.focus();\n    }\n  }\n\n  private autoResizeInput(): void {\n    if (!this.inputEl) return;\n    this.inputEl.style.height = \"40px\"; // Reset to single line\n    if (this.inputEl.scrollHeight > 40) {\n      this.inputEl.style.height =\n        Math.min(this.inputEl.scrollHeight, 120) + \"px\";\n    }\n  }\n\n  private updateSendButton(): void {\n    const btn = this.container?.querySelector(\n      \".da-send-btn\",\n    ) as HTMLButtonElement;\n    if (btn) {\n      btn.disabled = this.isLoading || this.isStreaming;\n    }\n  }\n\n  private async handleAccessCodeSubmit(): Promise<void> {\n    const input = this.container?.querySelector(\n      \".da-code-input\",\n    ) as HTMLInputElement;\n    const code = input?.value.trim();\n    if (!code) return;\n\n    const submitBtn = this.container?.querySelector(\n      \".da-code-submit\",\n    ) as HTMLButtonElement;\n    if (submitBtn) {\n      submitBtn.disabled = true;\n      submitBtn.textContent = \"Verifying...\";\n    }\n\n    try {\n      this.session = await this.api.exchangeCode(code);\n      this.needsAccessCode = false;\n      this.saveSession();\n      this.render();\n    } catch (err: any) {\n      if (submitBtn) {\n        submitBtn.disabled = false;\n        submitBtn.textContent = \"Continue\";\n      }\n      this.showError(err.message || \"Invalid access code\");\n    }\n  }\n\n  private async handleSend(): Promise<void> {\n    const content = this.inputEl.value.trim();\n    if (!content || this.isLoading || this.isStreaming) return;\n\n    this.inputEl.value = \"\";\n    this.autoResizeInput();\n    this.updateSendButton();\n\n    if (!this.session) {\n      this.needsAccessCode = true;\n      this.render();\n      return;\n    }\n\n    if (!this.chatId) {\n      try {\n        const chat = await this.api.createChat(this.session.token);\n        this.chatId = chat.chat_id;\n        this.saveSession();\n      } catch (err: any) {\n        if (err.message === \"Unauthorized\") {\n          this.logout();\n          return;\n        }\n        this.showError(err.message);\n        return;\n      }\n    }\n\n    // Add user message\n    this.messages.push({ role: \"user\", content });\n    this.saveSession();\n    this.render();\n\n    // Add placeholder for assistant\n    this.messages.push({ role: \"assistant\", content: \"\" });\n    this.isStreaming = true;\n    this.render();\n\n    try {\n      await this.api.sendMessage(\n        this.session.token,\n        this.chatId,\n        content,\n        (text) => {\n          const lastMsg = this.messages[this.messages.length - 1];\n          if (lastMsg.role === \"assistant\") {\n            lastMsg.content += text;\n            this.updateLastMessage();\n          }\n        },\n        () => {\n          this.isStreaming = false;\n          this.saveSession();\n          this.render();\n        },\n        (err) => {\n          if (err === \"Unauthorized\") {\n            this.logout();\n            return;\n          }\n          this.isStreaming = false;\n          const lastMsg = this.messages[this.messages.length - 1];\n          if (lastMsg.role === \"assistant\" && !lastMsg.content) {\n            lastMsg.content = \"Sorry, something went wrong. Please try again.\";\n          }\n          this.saveSession();\n          this.render();\n        },\n      );\n    } catch (err: any) {\n      if (err.message === \"Unauthorized\") {\n        this.logout();\n        return;\n      }\n      this.isStreaming = false;\n      this.showError(err.message);\n      this.render();\n    }\n  }\n\n  private updateLastMessage(): void {\n    const messagesEl = this.container?.querySelector(\".da-messages\");\n    const lastMsgEl = messagesEl?.querySelector(\n      \".da-message:last-child .da-message-content\",\n    );\n    const lastMsg = this.messages[this.messages.length - 1];\n    if (lastMsgEl && lastMsg) {\n      lastMsgEl.innerHTML =\n        this.renderMarkdown(lastMsg.content) +\n        '<span class=\"da-cursor\"></span>';\n\n      // Only scroll if user is near the bottom\n      if (messagesEl) {\n        const isNearBottom =\n          messagesEl.scrollHeight -\n            messagesEl.scrollTop -\n            messagesEl.clientHeight <\n          100;\n        if (isNearBottom) {\n          messagesEl.scrollTop = messagesEl.scrollHeight;\n        }\n      }\n    }\n  }\n\n  private endChat(): void {\n    if (\n      this.messages.length > 0 &&\n      !confirm(\"End this chat and start a new one?\")\n    ) {\n      return;\n    }\n    this.chatId = null;\n    this.messages = [];\n    this.saveSession();\n    this.render();\n  }\n\n  private showError(message: string): void {\n    const existingError = this.container?.querySelector(\".da-error\");\n    existingError?.remove();\n\n    const errorEl = document.createElement(\"div\");\n    errorEl.className = \"da-error\";\n    errorEl.textContent = message;\n\n    const body = this.container?.querySelector(\".da-body\");\n    body?.insertBefore(errorEl, body.firstChild);\n\n    setTimeout(() => errorEl.remove(), 5000);\n  }\n}\n\n// Initialize\ndeclare global {\n  interface Window {\n    DocsAgentConfig?: Config;\n    DocsAgent?: DocsAgentWidget;\n  }\n}\n\nfunction init() {\n  if (window.DocsAgentConfig) {\n    window.DocsAgent = new DocsAgentWidget(window.DocsAgentConfig);\n  }\n}\n\nif (document.readyState === \"loading\") {\n  document.addEventListener(\"DOMContentLoaded\", init);\n} else {\n  init();\n}\n"],
  "mappings": "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",
  "names": ["src_exports", "DocsAgentAPI", "baseUrl", "token", "headers", "code", "res", "err", "data", "chatId", "content", "onText", "onDone", "onError", "reader", "decoder", "buffer", "done", "value", "lines", "line", "event", "DocsAgentWidget", "config", "stored", "chat", "m", "message", "isUser", "contentHtml", "cursorHtml", "text", "div", "html", "e", "messagesEl", "btn", "submitBtn", "lastMsg", "lastMsgEl", "errorEl", "body", "init"]
}
